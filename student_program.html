<!DOCTYPE html>

<html>
    <head>
        <title> Outdoor Equity Alliance: Student Program</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"> -->

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

        <style>
            .header {
                background-color:darkseagreen;
                color:rgb(13, 34, 20);
            }

            .links {
                text-align: center;
            }

        </style>
    </head>

    <body>

        <div class="container-fluid, header">
            <center>
                <h1>Outdoor Equity Alliance</h1>
                <h2><a href="\student">Main</a> </h2>
            </center>
            <h3 class="text-right">User {{username}}</h3>
        </div>

        <hr>

        <h2> Program Information (program id {{program['program_id']}})</h2>
        <strong>Name:</strong> {{program['program_name']}}<br>
        <strong>Description:</strong> {{program['description']}}<br>



        <hr>
        <!--sort via module index plz-->
        <h3>List of Modules</h3>
        <table class = "table">
            <!-- row 1, containing names of each column -->

        {% if program['modules']|length != 0: %}
            {% for module in program['modules']: %}
            <tr>
                <td align= 'left'>
                    <strong>Module {{module['module_index']}}:</strong>
                </td>
                <td align = 'left'>
                    {{module['module_name']}}
                </td>

                <!-- check if module locked -->
                {% if module['module_index'] > mod_min_idx %}
                <td align="right">
                    <a href = "{{'/student/program/module?studentid=%s&moduleid=%s' %(studentid, module['module_id'])}}" class="btn btn-default btn-sm" role="button"> <span class="glyphicon glyphicon-info-sign" ></span> View</a>
                </td>
                {% else %}
                <td align="right">
                    <a href = "{{'/student/program/module?studentid=%s&moduleid=%s' %(studentid, module['module_id'])}}" class="btn btn-default btn-sm" role="button"> <span class="glyphicon glyphicon-info-sign" disabled ></span> View</a>
                </td>

                {% endif %}





            </tr>
                <!-- <strong>Module {{module['module_index']}}:</strong> {{module['module_name']}}<br> -->
            {% endfor %}
        {% endif %}
        </table>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
        </script>

        <script>

            'use strict';

            function handleResponse(response)
            {

            }

            let request = null;

            function update_db()
            {
                let url = '/enrollpgm?studentid=' + "{{studentid}}"+'&programid='+"{{program['program_id']}}"

                if (request != null)
                request.abort();

                request = $.ajax(
                    {
                    type: 'GET',
                    url: url,
                    success: handleResponse
                    }
                );

            }

            function setup()
            {
                $('#enroll-button').click(update_db);
            }
            $('document').ready(setup);

        </script>


    </body>
</html>